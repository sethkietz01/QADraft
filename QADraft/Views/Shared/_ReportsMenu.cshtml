<style>
    .menu-button {
        color: #fff;
        background-color: #861F41;
        border-color: #861F41;
    }
        
        .menu-button:hover {
            color: #fff;
            background-color: #b31f4f;
            border-color: #E6A65D;
        }

    #menu-bar {
        margin-bottom: 50px;
    }

    th {
        cursor: pointer;
        user-select: none;
    }

    .noSort {
        cursor: default;
        user-select: none;
    }

</style>

<h1>Reports Menu</h1>

<div id="menu-bar">
    <a class="btn buttons" asp-area="" asp-controller="QA" asp-action="YourQAs">Your QAs</a>
    <a class="btn buttons" asp-area="" asp-controller="QA" asp-action="Filter">Filter</a>
    <a class="btn buttons" asp-area="" asp-controller="QA" asp-action="AllGeekQAs">All Geek QAs</a>
    <a class="btn buttons" asp-area="" asp-controller="QA" asp-action="FlaggedAccounts">View All Flagged Accounts</a>
    <a class="btn buttons" asp-area="" asp-controller="QA" asp-action="QADescriptions">QA Descriptions</a>
</div>

<script>
    //table sorting
    function sortTable(n) {
        var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
        table = document.getElementById("table");
        switching = true;
            
        // Set the sorting direction to ascending:
        dir = "asc";
            
            
        //loop until end is reached
        while (switching) {
            // assume sorted
            switching = false;
            rows = table.rows;

            // Loop through all rows
            for (i = 1; i < (rows.length - 1); i++) {
                // assume no switching:
                shouldSwitch = false;

                // Get the current and next row
                x = rows[i].getElementsByTagName("TD")[n];
                y = rows[i + 1].getElementsByTagName("TD")[n];

                let xContent = x.innerHTML.trim();
                let yContent = y.innerHTML.trim();

                // Check if column content is numeric
                let xVal = isNaN(xContent) ? xContent.toLowerCase() : parseFloat(xContent);
                let yVal = isNaN(yContent) ? yContent.toLowerCase() : parseFloat(yContent);

                // Check if they should switch
                if (dir == "asc") {
                    if (xVal > yVal) {
                        shouldSwitch = true;
                        break;
                    }
                } 
                else if (dir == "desc") {
                    if (xVal < yVal) {
                        shouldSwitch = true;
                        break;
                    }
                }
            }

            if (shouldSwitch) {
                /* If a switch has been marked, make the switch
                and mark that a switch has been done: */
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
                // Each time a switch is done, increase this count by 1:
                switchcount ++;
            } 
            else {
                /* If no switching has been done AND the direction is "asc",
                set the direction to "desc" and run the while loop again. */
                if (switchcount == 0 && dir == "asc") {
                    dir = "desc";
                    switching = true;
                }
            }

        }

        console.log("start arrows");

        // Reset all arrows
        let headers = table.getElementsByTagName("TH");
        console.log(headers.length);
        for (let header of headers) {
            let arrow = header.querySelector(".arrow");
            if (arrow) {
                arrow.innerHTML = "";
            }
        }
        console.log("reset arrows");
        // Add arrow to the current sorted column
        if (dir == "asc") {
            console.log("asc");
            headers[n].querySelector(".arrow").innerHTML = "▲";
        } else {
            console.log("desc");
            headers[n].querySelector(".arrow").innerHTML = "▼";
        }

        // Toggle the direction for the next click
        sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';

        console.log("end");

    }

    function getSeverityColor(severity)
    {
        let color = "";

        switch (severity)
        {
            case '1':
                color = "#ffe000";
                break;
            case '2':
                color = "#ffce00";
                break;
            case '3':
                color = "#ffb700";
                break;
            case '4':
                color = "#ffb000";
                break;
            case '5':
                color = "#ffa500";
                break;
            case '6':
                color = "#ff9900";
                break;
            case '7':
                color = "#ff8e00";
                break;
            case '8':
                color = "#ff7b00";
                break;
            case '9':
                color = "#dc0505";
                break;
            case '10':
                color = "#dc0542";
                break;
            default:
                color = "#fff";
                break;
        }
        return color;
    }
        

    function applySeverityColors() {
        var severityCells = document.querySelectorAll('td[data-severity]');
        severityCells.forEach(function(cell) {
            var severity = cell.getAttribute('data-severity');
            var color = getSeverityColor(severity);
            cell.style.backgroundColor = color;
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        applySeverityColors();
    });
</script>